# API endpoints

This is a rough list of all the endpoints the server supports, taken from my notes and turned into a table. You'll need to dig more into the code for exact behaviors, but this should give you a place to start.

| Route                 | [HTTP method](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods) | Description                                                                                                                                                                                                                                                           |
|-----------------------|--------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `/auth`               | `GET`                                                                    | checks whether the user is authenticated. if so, returns a list of their roles                                                                                                                                                                                        |
| `/auth/oidc/login`    | `GET`                                                                    | redirects the user to the oidc provider                                                                                                                                                                                                                               |
| `/auth/oidc/response` | `GET`                                                                    | expects a reponse from the oidc provider, interprets it and provides a session cookie                                                                                                                                                                                 |
| `/auth/oidc/logout`   | `GET`                                                                    | clears the user's session cookies and redirects them to the oidc provider logout page                                                                                                                                                                                 |
| `/api/pigs/create`    | `POST`                                                                   | all we need to accept is the string name, return the full pig object if successful                                                                                                                                                                                    |
| `/api/pigs/update`    | `PUT`                                                                    | input is the object, output is simply whether it was successful                                                                                                                                                                                                       |
| `/api/pigs/delete`    | `DELETE`                                                                 | input is the uuid (or object), output is simply whether it was successful                                                                                                                                                                                             |
| `/api/pigs/fetch`     | `GET`                                                                    | input is the query, output a list of pig objects                                                                                                                                                                                                                      |
| `/api/users/fetch`    | `GET`                                                                    | input list of uuids or username, output list of users                                                                                                                                                                                                                 |
| `/api/users/roles`    | `GET`                                                                    | input list of uuids or username, output the roles for each user                                                                                                                                                                                                       |
| `/api/users/expire`   | `PATCH`                                                                  | input uuid, terminates session                                                                                                                                                                                                                                        |
| `/api/bulk/create`    | `POST`                                                                   | send a list of names to the server in request body, does initial processing and returns the started bulk object                                                                                                                                                       |
| `/api/bulk/patch`     | `PATCH`                                                                  | input the changes, e.g. whether a name was accepted or rejected, output is simply whether it was successful. client will have to submit a separate request to create the pig and will have to update the list on its end. trying not to waste a bunch of data transit |
| `/api/bulk/fetch`     | `GET`                                                                    | input is the query, output a list of imports the user can see                                                                                                                                                                                                         |
